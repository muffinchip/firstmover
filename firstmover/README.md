# FirstMover — Early Adopter Score (Flask)

A minimal Flask app that computes an "Early Adopter Score" from your join dates on Gmail and Twitter/X.

## MVP Features
- **Google Sign-In** (Authlib) → read-only Gmail, finds your **oldest message** date via a fast **binary search**.
- **Twitter/X lookup** (username + v2 API bearer token) → gets `created_at`.
- Converts dates into rough **adoption percentiles** using placeholder curve seeds in `data/adoption_curves.json` and shows a composite score.

## Local Quickstart

1. **Python env**
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```

2. **Environment variables**
   - Copy `.env.example` to `.env` and fill in values.
   - Or export them in your shell:
     ```bash
     export SECRET_KEY=change-me
     export GOOGLE_CLIENT_ID=...
     export GOOGLE_CLIENT_SECRET=...
     export X_BEARER_TOKEN=...   # optional for Twitter/X lookup
     ```

3. **Google Cloud setup**
   - Create a project at https://console.cloud.google.com/
   - Configure **OAuth consent screen** (External, testing is fine for dev)
   - Create **OAuth 2.0 Client ID** (type: **Web application**)
     - Authorized redirect URI: `http://localhost:5000/auth/google`
   - Enable the **Gmail API** for your project.
   - Put your `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET` in env.

4. **Run**
   ```bash
   flask --app app run --debug
   # open http://localhost:5000
   ```

## One-click deploy to Render

1. Push this folder to a **public GitHub repo** (e.g., `muffinchip/firstmover`).
2. Click this link (swap in your repo URL):  
   `https://render.com/deploy?repo=https://github.com/muffinchip/firstmover`
3. On Render, set these **Environment Variables** when prompted (defined in `render.yaml`):
   - `GOOGLE_CLIENT_ID`
   - `GOOGLE_CLIENT_SECRET`
   - (optional) `X_BEARER_TOKEN`
   - `SECRET_KEY` can be autogenerated
4. Wait for build → visit the URL → test `/healthz` and `/`.

## Testing the Gmail binary search
- For older inboxes, results should appear in seconds (log₂ of days).
- You can temporarily add prints in `gmail_find_earliest_date` for debugging.
- If no email in the inferred window, code falls back to scanning the last page.

## Notes & next steps
- Replace `data/adoption_curves.json` with real cumulative adoption curves for better percentiles.
- Privacy: The app only stores derived dates/score in memory for the session. No message content is stored.
- Add more platforms via OAuth or data export parsing (Instagram/Facebook/LinkedIn).

## Repo structure
```
firstmover/
  app.py
  requirements.txt
  Dockerfile
  render.yaml
  Procfile
  .env.example
  data/
    adoption_curves.json
  templates/
    layout.html
    index.html
    results.html
  static/
```
